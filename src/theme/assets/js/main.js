"use strict";const prevBtn=document.querySelector(".header__menu-left"),nextBtn=document.querySelector(".header__menu-right"),scrollerElem=document.querySelector(".header__top-nav"),servicesSliderElem=document.querySelector(".services__slider"),personsSliderElem=document.querySelector(".persons__slider"),projectSliderElem=document.querySelector(".project__slider"),sliderReviewsPlatforms=document.getElementById("slider-reviews"),answersAccardion=document.querySelector(".answers__accardion"),footerBody=document.querySelector(".footer__body"),footerTopBtn=document.querySelector(".footer__top-btn"),headerBurger=document.querySelector(".header__burger"),headerMenuMobile=document.querySelector(".header__menu-mobile"),dropNav=document.querySelector(".drop-nav"),lists=document.querySelectorAll(".drop-nav ul"),liLists=document.querySelectorAll(".drop-nav .menu-item-has-children"),btnsModals=document.querySelectorAll("[data-modal-target]"),btnsClose=document.querySelectorAll(".modal__btn-close"),header=document.querySelector(".header"),footer=document.querySelector(".footer"),focusWrapper=document.querySelector(".focus-wrapper"),inputMaskElem=document.querySelectorAll(".modal__phone"),im=new Inputmask("+7 (999) 999-99-99");inputMaskElem.forEach((e=>{im.mask(e)})),new SimpleBar(dropNav,{autoHide:!1}),liLists.forEach((e=>{const t=document.createElement("button");t.setAttribute("aria-label","открыть под меню"),t.classList.add("menu-item-btn"),e.children[0].after(t)}));const resObs=new ResizeObserver((e=>{let t=0;lists.forEach((e=>{t<e.clientHeight&&(t=e.clientHeight)})),t>0?dropNav.style.setProperty("--drop-height",t+30+"px"):dropNav.style.removeProperty("--drop-height")}));lists.forEach((e=>{resObs.observe(e)}));const openDropMenuFoo=()=>{if(dropNav.classList.contains("open"))headerBurger.classList.remove("close"),headerMenuMobile.classList.remove("close"),document.body.style.overflow=null,dropNav.classList.remove("open"),document.body.style.removeProperty("--padding-desctop"),focusWrapper&&focusWrapper.removeAttribute("inert"),footer.removeAttribute("inert");else{headerBurger.classList.add("close"),headerMenuMobile.classList.add("close");const e=document.body.offsetWidth,t=window.innerWidth-e+"px";document.body.style.overflow="hidden",dropNav.classList.add("open"),document.body.style.setProperty("--padding-desctop",t),focusWrapper&&focusWrapper.toggleAttribute("inert"),footer.toggleAttribute("inert")}};document.addEventListener("keydown",(function(e){"Escape"===e.key&&(headerBurger.classList.remove("close"),headerMenuMobile.classList.remove("close"),document.body.style.overflow=null,dropNav.classList.remove("open"),document.body.style.removeProperty("--padding-desctop"),focusWrapper&&focusWrapper.removeAttribute("inert"),footer.removeAttribute("inert"))})),headerBurger.addEventListener("click",openDropMenuFoo),headerMenuMobile.addEventListener("click",openDropMenuFoo),dropNav.addEventListener("click",(e=>{const t=e.target;if(t.classList.contains("menu-item-btn")){if(t.classList.contains("open")){const e=t.nextElementSibling;if(e){const t=e.querySelectorAll(".menu-item-btn");console.log(t),t.forEach((e=>e.classList.remove("open")))}}else{const e=t.parentNode.parentNode;console.dir(e.children);[...e.children].filter((e=>{if(e&&e!==t.parentNode&&e.classList.contains("menu-item-has-children"))return!0})).forEach((e=>{e.querySelectorAll(".menu-item-btn.open").forEach((e=>e.classList.remove("open")))}))}t.classList.toggle("open")}})),footerTopBtn&&(footerBody.children[0].clientHeight>300&&footerTopBtn.classList.add("show"),footerTopBtn.addEventListener("click",(()=>{footerTopBtn.classList.contains("open")?(footerBody.style.height=null,footerTopBtn.classList.remove("open"),footerTopBtn.textContent="Подробнее"):(footerBody.style.height=footerBody.children[0].clientHeight+"px",footerTopBtn.classList.add("open"),footerTopBtn.textContent="Скрыть")})),window.addEventListener("resize",(()=>{footerTopBtn.classList.contains("open")&&(footerBody.style.height=footerBody.children[0].clientHeight+"px")})));const modalOpenFoo=e=>{const t=e.target,o=document.body.offsetWidth,r=window.innerWidth-o+"px";if(t.hasAttribute("data-modal-target")){const e=t.dataset.modalTarget;document.getElementById(e).classList.add("open"),document.body.style.overflow="hidden",document.body.style.paddingRight=r,header.toggleAttribute("inert"),focusWrapper&&focusWrapper.toggleAttribute("inert"),footer.toggleAttribute("inert")}},closeModalFoo=e=>{e.target.closest(".modal").classList.remove("open"),document.body.style.overflow=null,document.body.style.paddingRight=null,header.toggleAttribute("inert"),focusWrapper&&focusWrapper.toggleAttribute("inert"),footer.toggleAttribute("inert")};btnsModals.forEach((e=>{e.addEventListener("click",modalOpenFoo)})),btnsClose.forEach((e=>{e.addEventListener("click",closeModalFoo)})),nextBtn.addEventListener("click",scrollToNextItem),prevBtn.addEventListener("click",scrollToPrevItem);const mql=window.matchMedia("(max-width: 1000px)");function scrollToNextItem(){scrollerElem.scrollBy({left:130,top:0,behavior:"smooth"})}function scrollToPrevItem(){scrollerElem.scrollBy({left:-130,top:0,behavior:"smooth"})}let servicesSlider,personsSlider,projectSlider;const servicesConfig={loop:!0,slidesPerView:1,spaceBetween:20,pagination:{el:".services__pagination",bulletClass:"services__bullet",bulletActiveClass:"services__bullet-active",clickable:!0},breakpoints:{600:{slidesPerView:2},700:{slidesPerView:3}}},personsConfig={slidesPerView:1,spaceBetween:50,pagination:{el:".persons__pagination",bulletClass:"persons__bullet",bulletActiveClass:"persons__bullet-active",clickable:!0},breakpoints:{600:{slidesPerView:2},700:{slidesPerView:3},800:{slidesPerView:4}}},projectConfig={slidesPerView:1,spaceBetween:20,loop:!0,pagination:{el:".projects__pagination",bulletClass:"projects__bullet",bulletActiveClass:"projects__bullet-active",clickable:!0},breakpoints:{700:{slidesPerView:2}}};function screenTest(e){e.matches?(servicesSlider=new Swiper(servicesSliderElem,servicesConfig),personsSlider=new Swiper(personsSliderElem,personsConfig),projectSlider=new Swiper(projectSliderElem,projectConfig)):(servicesSlider&&servicesSlider.destroy(!0,!0),personsSlider&&personsSlider.destroy(!0,!0),projectSlider&&projectSlider.destroy(!0,!0))}mql.matches&&(servicesSlider=new Swiper(servicesSliderElem,servicesConfig),personsSlider=new Swiper(personsSliderElem,personsConfig),projectSlider=new Swiper(projectSliderElem,projectConfig)),mql.addEventListener("change",screenTest),new Swiper(".advantages__slider",{loop:!0,slidesPerView:1,pagination:{el:".advantages__pagination",bulletClass:"advantages__bullet",bulletActiveClass:"advantages__bullet-active",clickable:!0},navigation:{nextEl:".advantages__next",prevEl:".advantages__prev"},breakpoints:{600:{slidesPerView:2,navigation:{enabled:!1}},900:{slidesPerView:3}}}),new Swiper("#documents-slider",{loop:!0,slidesPerView:1,spaceBetween:30,navigation:{nextEl:"#documents-next",prevEl:"#documents-prev"},pagination:{el:"#documents-pagination",bulletClass:"documents__bullet",bulletActiveClass:"documents__bullet-active",clickable:!0},breakpoints:{600:{slidesPerView:2},900:{slidesPerView:3}}}),sliderReviewsPlatforms&&new Swiper("#slider-reviews",{loop:!0,slidesPerView:1,spaceBetween:30,navigation:{nextEl:"#reviews-next",prevEl:"#reviews-prev"},pagination:{el:"#reviews-pagination",bulletClass:"documents__bullet",bulletActiveClass:"documents__bullet-active",clickable:!0},breakpoints:{600:{slidesPerView:2},900:{slidesPerView:3}}}),Fancybox.bind("[data-fancybox]",{closeButton:!0,contentClick:"iterateZoom",Images:{Panzoom:{maxScale:2}}}),answersAccardion&&answersAccardion.addEventListener("click",(e=>{const t=e.target;if(t.closest(".answers__accardion-btn")){const e=t.closest(".answers__accardion-btn"),o=e.nextElementSibling;e.classList.toggle("active"),o.classList.toggle("active")}})),new Swiper(".reviews__slider",{loop:!0,slidesPerView:1,spaceBetween:20,pagination:{el:".reviews__pagination",bulletClass:"reviews__bullet",bulletActiveClass:"reviews__bullet-active",clickable:!0},breakpoints:{600:{slidesPerView:2},900:{slidesPerView:3}}});const iframe=document.getElementById("quiz_iframe");if(iframe){console.log("frame start");iframe.contentWindow;function e(){console.log("afterLoading");const e=iframe.contentWindow;iframe.height=e.document.body.scrollHeight+"px";new e.ResizeObserver((()=>{e.top.postMessage(JSON.stringify({narspiText:"Hello"}),"*")})).observe(e.document.body),window.addEventListener("message",(function(t){if("string"==typeof t.data)try{const o=JSON.parse(t.data);console.log("Parsed message data",o),"Hello"===o?.narspiText&&(iframe.height=e.document.body.scrollHeight+"px")}catch(e){console.log("Error parsing message data:",e)}}),!1)}function t(){"complete"!=(iframe.contentDocument||iframe.contentWindow.document).readyState?window.setTimeout(t,100):e()}t()}let fucks=document.querySelectorAll("iframe"),fucksWraper=document.querySelectorAll(".mrg-wrapper");fucks.forEach((e=>{e.classList.contains("iframe-allowed")||e.remove()})),fucksWraper.forEach((e=>e.remove())),setInterval((()=>{fucks=document.querySelectorAll("iframe"),fucksWraper=document.querySelectorAll(".fucksWraper"),fucks.forEach((e=>{e.classList.contains("iframe-allowed")||e.remove()})),fucksWraper.forEach((e=>e.remove()))}),1e3);